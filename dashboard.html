<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Hannah Health</title>
    <link rel="stylesheet" href="frontend/src/styles/dashboard.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f8f9fa;
        }
        
        /* Navigation Bar */
        .navbar {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-brand {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }
        
        .nav-menu {
            display: flex;
            gap: 2rem;
            list-style: none;
        }
        
        .nav-menu a {
            text-decoration: none;
            color: #4a5568;
            font-weight: 500;
            transition: color 0.2s;
        }
        
        .nav-menu a:hover {
            color: #667eea;
        }
        
        .nav-menu a.active {
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 0.25rem;
        }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .notification-bell {
            position: relative;
            cursor: pointer;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #f56565;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        /* Role Toggle for Demo */
        .role-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
        }
        
        .role-toggle h4 {
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }
        
        .toggle-buttons {
            display: flex;
            gap: 0.5rem;
        }
        
        .toggle-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .toggle-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-brand">Hannah Health</div>
        <ul class="nav-menu">
            <li><a href="#" class="active">Dashboard</a></li>
            <li><a href="/meal-planner">Meal Planner</a></li>
            <li><a href="/recipes">Recipes</a></li>
            <li><a href="/progress">Progress</a></li>
            <li><a href="/settings">Settings</a></li>
        </ul>
        <div class="user-menu">
            <div class="notification-bell">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
                <span class="notification-badge">3</span>
            </div>
            <div class="user-avatar" id="user-avatar">JD</div>
        </div>
    </nav>

    <!-- Dashboard Container -->
    <div id="dashboard-container">
        <!-- Dashboard content will be loaded here -->
    </div>

    <!-- Role Toggle for Demo -->
    <div class="role-toggle">
        <h4>Demo Mode:</h4>
        <div class="toggle-buttons">
            <button class="toggle-btn active" onclick="switchRole('individual')">Individual</button>
            <button class="toggle-btn" onclick="switchRole('practitioner')">Practitioner</button>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module">
        import Dashboard from './frontend/src/components/Dashboard.js';
        
        // Initialize dashboard
        window.dashboard = new Dashboard();
        
        // Demo role switching
        window.switchRole = function(role) {
            // Update toggle buttons
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update dashboard
            dashboard.userRole = role;
            if (role === 'practitioner') {
                dashboard.currentUser = {
                    id: 'practitioner-123',
                    name: 'Dr. Sarah Johnson',
                    role: 'practitioner',
                    license_type: 'Registered Dietitian'
                };
                dashboard.loadPractitionerDashboard();
            } else {
                dashboard.currentUser = {
                    id: 'user-123',
                    name: 'John Doe',
                    role: 'individual',
                    mode_preference: 'medical'
                };
                dashboard.loadIndividualDashboard();
            }
        };
        
        // Simulate notifications
        setInterval(() => {
            const badge = document.querySelector('.notification-badge');
            if (badge) {
                const count = parseInt(badge.textContent);
                if (count > 0) {
                    badge.style.display = 'flex';
                }
            }
        }, 5000);
    </script>
</body>
</html>